<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>溶液浓度换算计算器</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .description {
            color: #7f8c8d;
            font-size: 1.1rem;
            max-width: 700px;
            margin: 0 auto;
        }
        
        .calculator {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 768px) {
            .calculator {
                grid-template-columns: 1fr;
            }
        }
        
        .card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card h2 {
            color: #3498db;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f1f1f1;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .input-with-unit {
            display: flex;
        }
        
        input[type="number"] {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #e1e8ed;
            border-radius: 5px 0 0 5px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input[type="number"]:focus {
            border-color: #3498db;
            outline: none;
        }
        
        select {
            padding: 12px 15px;
            border: 2px solid #e1e8ed;
            border-left: none;
            border-radius: 0 5px 5px 0;
            background: #f8f9fa;
            font-size: 16px;
            cursor: pointer;
        }
        
        button {
            display: block;
            width: 100%;
            padding: 15px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
            margin-top: 10px;
        }
        
        button:hover {
            background: #2980b9;
        }
        
        .result {
            margin-top: 20px;
            padding: 15px;
            background: #e8f4fc;
            border-radius: 5px;
            border-left: 5px solid #3498db;
        }
        
        .result h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .formula {
            text-align: center;
            font-size: 24px;
            margin: 20px 0;
            color: #2c3e50;
            font-weight: bold;
        }
        
        .examples {
            margin-top: 30px;
        }
        
        .examples h3 {
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        .example-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .example-item:hover {
            background: #e9ecef;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        .error {
            color: #e74c3c;
            margin-top: 10px;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>溶液浓度换算计算器</h1>
            <p class="description">基于稀释公式 C₁V₁ = C₂V₂，输入任意三个已知值，计算第四个未知值。支持mL、L、mmol、mol等常见单位。</p>
            <div class="formula">C₁ × V₁ = C₂ × V₂</div>
        </header>
        
        <div class="calculator">
            <div class="card">
                <h2>初始溶液</h2>
                <div class="input-group">
                    <label for="c1">初始浓度 (C₁)</label>
                    <div class="input-with-unit">
                        <input type="number" id="c1" placeholder="输入初始浓度">
                        <select id="c1-unit">
                            <option value="mol/L">mol/L</option>
                            <option value="mmol/L">mmol/L</option>
                            <option value="μmol/L">μmol/L</option>
                            <option value="g/L">g/L</option>
                            <option value="mg/L">mg/L</option>
                        </select>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="v1">初始体积 (V₁)</label>
                    <div class="input-with-unit">
                        <input type="number" id="v1" placeholder="输入初始体积">
                        <select id="v1-unit">
                            <option value="mL">mL</option>
                            <option value="L">L</option>
                            <option value="μL">μL</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h2>目标溶液</h2>
                <div class="input-group">
                    <label for="c2">目标浓度 (C₂)</label>
                    <div class="input-with-unit">
                        <input type="number" id="c2" placeholder="输入目标浓度">
                        <select id="c2-unit">
                            <option value="mol/L">mol/L</option>
                            <option value="mmol/L">mmol/L</option>
                            <option value="μmol/L">μmol/L</option>
                            <option value="g/L">g/L</option>
                            <option value="mg/L">mg/L</option>
                        </select>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="v2">目标体积 (V₂)</label>
                    <div class="input-with-unit">
                        <input type="number" id="v2" placeholder="输入目标体积">
                        <select id="v2-unit">
                            <option value="mL">mL</option>
                            <option value="L">L</option>
                            <option value="μL">μL</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <button id="calculate">计算</button>
            <div class="result" id="result">
                <h3>计算结果</h3>
                <p>请在左侧输入任意三个已知值，然后点击"计算"按钮。</p>
            </div>
            <div class="error" id="error"></div>
        </div>
        
        <div class="card examples">
            <h3>示例计算</h3>
            <div class="example-item" data-example="1">
                <strong>示例 1:</strong> 从1 mol/L的储备液配制100 mL的0.1 mol/L溶液
            </div>
            <div class="example-item" data-example="2">
                <strong>示例 2:</strong> 用5 mL的0.5 mol/L溶液稀释到0.05 mol/L，求最终体积
            </div>
            <div class="example-item" data-example="3">
                <strong>示例 3:</strong> 将2 mL的50 mmol/L溶液稀释到10 mL，求最终浓度
            </div>
        </div>
        
        <footer>
            <p>溶液浓度换算计算器 &copy; 2023 | 基于 C₁V₁ = C₂V₂ 公式</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const c1Input = document.getElementById('c1');
            const v1Input = document.getElementById('v1');
            const c2Input = document.getElementById('c2');
            const v2Input = document.getElementById('v2');
            const c1Unit = document.getElementById('c1-unit');
            const v1Unit = document.getElementById('v1-unit');
            const c2Unit = document.getElementById('c2-unit');
            const v2Unit = document.getElementById('v2-unit');
            const calculateBtn = document.getElementById('calculate');
            const resultDiv = document.getElementById('result');
            const errorDiv = document.getElementById('error');
            const exampleItems = document.querySelectorAll('.example-item');
            
            // 浓度单位转换因子（相对于mol/L）
            const concentrationFactors = {
                'mol/L': 1,
                'mmol/L': 0.001,
                'μmol/L': 0.000001,
                'g/L': 1, // 假设分子量为1，实际应用中需要分子量信息
                'mg/L': 0.001 // 假设分子量为1
            };
            
            // 体积单位转换因子（相对于L）
            const volumeFactors = {
                'L': 1,
                'mL': 0.001,
                'μL': 0.000001
            };
            
            // 计算函数
            function calculate() {
                errorDiv.textContent = '';
                
                // 获取输入值
                const c1 = parseFloat(c1Input.value);
                const v1 = parseFloat(v1Input.value);
                const c2 = parseFloat(c2Input.value);
                const v2 = parseFloat(v2Input.value);
                
                // 计算非空值的数量
                const inputs = [c1, v1, c2, v2];
                const filledInputs = inputs.filter(val => !isNaN(val));
                
                // 检查是否恰好有三个值
                if (filledInputs.length !== 3) {
                    errorDiv.textContent = '请填写任意三个值进行计算';
                    return;
                }
                
                // 转换为标准单位（mol/L 和 L）
                const c1Std = isNaN(c1) ? null : c1 * concentrationFactors[c1Unit.value];
                const v1Std = isNaN(v1) ? null : v1 * volumeFactors[v1Unit.value];
                const c2Std = isNaN(c2) ? null : c2 * concentrationFactors[c2Unit.value];
                const v2Std = isNaN(v2) ? null : v2 * volumeFactors[v2Unit.value];
                
                let resultValue, resultUnit, resultText;
                
                // 根据缺失的值进行计算
                if (isNaN(c1)) {
                    // 计算 C1
                    resultValue = (c2Std * v2Std) / v1Std;
                    resultValue = resultValue / concentrationFactors[c1Unit.value]; // 转换回原始单位
                    resultUnit = c1Unit.value;
                    resultText = `初始浓度 C₁ = ${resultValue.toExponential(4)} ${resultUnit}`;
                } else if (isNaN(v1)) {
                    // 计算 V1
                    resultValue = (c2Std * v2Std) / c1Std;
                    resultValue = resultValue / volumeFactors[v1Unit.value]; // 转换回原始单位
                    resultUnit = v1Unit.value;
                    resultText = `初始体积 V₁ = ${resultValue.toExponential(4)} ${resultUnit}`;
                } else if (isNaN(c2)) {
                    // 计算 C2
                    resultValue = (c1Std * v1Std) / v2Std;
                    resultValue = resultValue / concentrationFactors[c2Unit.value]; // 转换回原始单位
                    resultUnit = c2Unit.value;
                    resultText = `目标浓度 C₂ = ${resultValue.toExponential(4)} ${resultUnit}`;
                } else if (isNaN(v2)) {
                    // 计算 V2
                    resultValue = (c1Std * v1Std) / c2Std;
                    resultValue = resultValue / volumeFactors[v2Unit.value]; // 转换回原始单位
                    resultUnit = v2Unit.value;
                    resultText = `目标体积 V₂ = ${resultValue.toExponential(4)} ${resultUnit}`;
                }
                
                // 显示结果
                resultDiv.innerHTML = `
                    <h3>计算结果</h3>
                    <p>${resultText}</p>
                    <p>计算公式: C₁ × V₁ = C₂ × V₂</p>
                    <p>${isNaN(c1) ? 'C₁' : c1 + ' ' + c1Unit.value} × ${isNaN(v1) ? 'V₁' : v1 + ' ' + v1Unit.value} = ${isNaN(c2) ? 'C₂' : c2 + ' ' + c2Unit.value} × ${isNaN(v2) ? 'V₂' : v2 + ' ' + v2Unit.value}</p>
                `;
            }
            
            // 添加计算按钮事件监听
            calculateBtn.addEventListener('click', calculate);
            
            // 示例数据
            const examples = {
                1: {
                    c1: 1,
                    c1Unit: 'mol/L',
                    v1: '',
                    v1Unit: 'mL',
                    c2: 0.1,
                    c2Unit: 'mol/L',
                    v2: 100,
                    v2Unit: 'mL'
                },
                2: {
                    c1: 0.5,
                    c1Unit: 'mol/L',
                    v1: 5,
                    v1Unit: 'mL',
                    c2: 0.05,
                    c2Unit: 'mol/L',
                    v2: '',
                    v2Unit: 'mL'
                },
                3: {
                    c1: 50,
                    c1Unit: 'mmol/L',
                    v1: 2,
                    v1Unit: 'mL',
                    c2: '',
                    c2Unit: 'mmol/L',
                    v2: 10,
                    v2Unit: 'mL'
                }
            };
            
            // 添加示例点击事件
            exampleItems.forEach(item => {
                item.addEventListener('click', function() {
                    const exampleId = this.getAttribute('data-example');
                    const example = examples[exampleId];
                    
                    // 填充示例数据
                    c1Input.value = example.c1 || '';
                    c1Unit.value = example.c1Unit;
                    v1Input.value = example.v1 || '';
                    v1Unit.value = example.v1Unit;
                    c2Input.value = example.c2 || '';
                    c2Unit.value = example.c2Unit;
                    v2Input.value = example.v2 || '';
                    v2Unit.value = example.v2Unit;
                    
                    // 清除之前的结果和错误信息
                    resultDiv.innerHTML = '<h3>计算结果</h3><p>请点击"计算"按钮查看结果。</p>';
                    errorDiv.textContent = '';
                });
            });
        });
    </script>
</body>
</html>
